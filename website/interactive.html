<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Dark Matter Detection</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        .interactive-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        .upload-section {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .image-upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.3);
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(102, 126, 234, 0.05);
        }
        .image-upload-area:hover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
        }
        .image-upload-area.dragover {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.2);
        }
        #fileInput {
            display: none;
        }
        .canvas-container {
            position: relative;
            margin: 2rem 0;
            background: var(--darker-bg);
            border-radius: 15px;
            padding: 1rem;
            display: none;
        }
        #imageCanvas {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            cursor: crosshair;
        }
        .controls-panel {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1rem;
            display: none;
        }
        .control-group {
            display: flex;
            gap: 1rem;
            align-items: center;
            margin-bottom: 1rem;
        }
        .control-group label {
            min-width: 150px;
            color: var(--text-primary);
            font-weight: 500;
        }
        .btn-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .btn-mode {
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: transparent;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        .btn-mode.active {
            background: var(--gradient-1);
            border-color: var(--primary-color);
        }
        .btn-mode:hover {
            border-color: var(--primary-color);
        }
        .results-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }
        .result-card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .result-card h3 {
            font-family: 'Space Grotesk', sans-serif;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        #predictionCanvas {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }
        .galaxy-marker {
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            border: 2px solid white;
            transform: translate(-50%, -50%);
            pointer-events: none;
        }
        .marker-dark-matter {
            background: rgba(255, 0, 0, 0.7);
            border-color: darkred;
        }
        .marker-background {
            background: rgba(0, 0, 255, 0.7);
            border-color: darkblue;
        }
        .marker-predicted {
            background: rgba(255, 255, 0, 0.7);
            border-color: yellow;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        .stat-item {
            background: rgba(102, 126, 234, 0.1);
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
        }
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-color);
        }
        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        .instructions {
            background: rgba(102, 126, 234, 0.1);
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--primary-color);
        }
        .instructions h3 {
            font-family: 'Space Grotesk', sans-serif;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        .instructions ol {
            color: var(--text-secondary);
            line-height: 2;
            padding-left: 1.5rem;
        }
        .instructions li {
            margin-bottom: 0.5rem;
        }
        .example-images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        .example-image-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        .example-image-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        .example-image-card.selected {
            border-color: var(--primary-color);
            background: rgba(102, 126, 234, 0.2);
        }
        .example-preview {
            width: 100%;
            height: 150px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-bottom: 0.5rem;
        }
        .example-image-card p {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin: 0;
        }
        @media (max-width: 768px) {
            .results-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span class="logo-icon">üåå</span>
                <span class="logo-text">Dark Matter Projectile</span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="index.html#visualizations">Visualizations</a></li>
                <li><a href="interactive.html" class="active">Interactive</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <section class="section" style="padding-top: 120px;">
        <div class="interactive-container">
            <h1 class="section-title">Interactive Dark Matter Detection</h1>
            <p class="section-description">
                Upload an image of a galaxy grid, mark regions with dark matter, and let our quantum ML model predict dark matter locations.
            </p>

            <!-- Instructions -->
            <div class="instructions">
                <h3>üéØ How It Works:</h3>
                <div style="background: rgba(102, 126, 234, 0.2); padding: 1rem; border-radius: 10px; margin-bottom: 1rem;">
                    <p style="color: var(--text-primary); font-weight: 600; margin-bottom: 0.5rem;">‚ú® You Decide Where Dark Matter Is!</p>
                    <p style="color: var(--text-secondary); margin: 0;">Click on galaxies to mark where YOU think dark matter is present. The system will then show you how gravitational lensing distorts those galaxies, and the quantum ML model will predict dark matter locations.</p>
                </div>
                <ol>
                    <li><strong>Choose Example Image:</strong> Select one of the galaxy field images below</li>
                    <li><strong>YOU Mark Dark Matter:</strong> Click on galaxies where YOU decide dark matter is present (red markers appear)</li>
                    <li><strong>See Gravitational Lensing:</strong> Watch how dark matter distorts the galaxy shapes (visual effect)</li>
                    <li><strong>Model Predicts:</strong> The quantum ML model analyzes the distorted galaxies and predicts where dark matter is</li>
                    <li><strong>Compare:</strong> See how the model's predictions compare to YOUR choices</li>
                </ol>
            </div>

            <!-- Image Selection Section -->
            <div class="upload-section">
                <h3 style="color: var(--text-primary); margin-bottom: 1.5rem; font-family: 'Space Grotesk', sans-serif;">Step 1: Choose a Galaxy Field Image</h3>
                <div class="example-images-grid" id="exampleImagesGrid">
                    <div class="example-image-card" data-image="example1">
                        <div class="example-preview" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üåå</div>
                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Galaxy Cluster</div>
                        </div>
                        <p>Example 1: Galaxy Cluster</p>
                    </div>
                    <div class="example-image-card" data-image="example2">
                        <div class="example-preview" style="background: linear-gradient(135deg, #2d1b4e 0%, #1a1a2e 50%, #16213e 100%);">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚≠ê</div>
                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Deep Field</div>
                        </div>
                        <p>Example 2: Deep Field</p>
                    </div>
                    <div class="example-image-card" data-image="example3">
                        <div class="example-preview" style="background: linear-gradient(135deg, #0f3460 0%, #16213e 50%, #1a1a2e 100%);">
                            <div style="font-size: 2rem; margin-bottom: 0.5rem;">üî≠</div>
                            <div style="font-size: 0.8rem; color: rgba(255,255,255,0.7);">Galaxy Survey</div>
                        </div>
                        <p>Example 3: Galaxy Survey</p>
                    </div>
                </div>

                <div class="canvas-container" id="canvasContainer">
                    <canvas id="imageCanvas"></canvas>
                </div>

                <div class="controls-panel" id="controlsPanel">
                    <div style="background: rgba(255, 0, 0, 0.1); padding: 1rem; border-radius: 10px; margin-bottom: 1rem; border-left: 4px solid #ff4444;">
                        <p style="color: var(--text-primary); font-weight: 600; margin: 0;">
                            ‚ú® Step 2: YOU Decide Where Dark Matter Is!
                        </p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0.5rem 0 0 0;">
                            Click on galaxies where YOU think dark matter is present. Red markers will appear, and you'll see how gravitational lensing distorts those galaxies.
                        </p>
                    </div>
                    <div class="control-group">
                        <label>Your Action:</label>
                        <div class="btn-group">
                            <button class="btn-mode active" data-mode="dark-matter" style="background: rgba(255, 0, 0, 0.2); border-color: #ff4444;">
                                üéØ Mark Dark Matter Location
                            </button>
                            <button class="btn-mode" data-mode="clear">Clear All Markers</button>
                        </div>
                    </div>
                    <div class="control-group">
                        <label>Next Steps:</label>
                        <div class="btn-group">
                            <button class="btn btn-primary" id="showLensingBtn" style="display: none;">Show Gravitational Lensing Effect</button>
                            <button class="btn btn-primary" id="predictBtn" style="display: none;">Let Model Predict Dark Matter</button>
                            <button class="btn btn-secondary" id="resetBtn">Start Over</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Lensing Effect Section -->
            <div class="results-section" id="lensingSection" style="display: none;">
                <div class="result-card" style="grid-column: 1 / -1;">
                    <h3>üî≠ Gravitational Lensing Effect</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">
                        This shows how dark matter distorts the galaxies you marked. The red circles show YOUR dark matter locations, 
                        and you can see how those galaxies appear stretched and distorted - this is gravitational lensing in action!
                    </p>
                    <canvas id="lensingCanvas"></canvas>
                    <div style="margin-top: 1rem; padding: 1rem; background: rgba(102, 126, 234, 0.1); border-radius: 10px;">
                        <p style="color: var(--text-primary); margin: 0;">
                            <strong>What you're seeing:</strong> Dark matter bends light, making galaxies behind it appear stretched and elliptical. 
                            This distortion is what the quantum ML model uses to detect dark matter!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection" style="display: none;">
                <div class="result-card">
                    <h3>‚ú® Your Dark Matter Choices</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">These are the galaxies YOU marked as having dark matter nearby. Notice how they appear distorted due to gravitational lensing.</p>
                    <canvas id="groundTruthCanvas"></canvas>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="darkMatterCount">0</div>
                            <div class="stat-label">Your Dark Matter Choices</div>
                        </div>
                    </div>
                </div>
                <div class="result-card">
                    <h3>ü§ñ Model's Predictions</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 1rem;">The quantum ML model analyzed the distorted galaxy shapes and predicted where dark matter is located.</p>
                    <canvas id="predictionCanvas"></canvas>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="predictedDarkMatter">0</div>
                            <div class="stat-label">Model Predicted Dark Matter</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="accuracy">-</div>
                            <div class="stat-label">Agreement with You</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="script.js"></script>
    <script src="interactive.js"></script>
</body>
</html>

